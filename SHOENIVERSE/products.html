<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Browse our premium collection of Nike Dunks and other high-quality shoes at SHOENIVERSE.">
	<title>Products - SHOENIVERSE</title>
	<link rel="stylesheet" href="products.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
	<div class="banner">
		<nav class="navbar">
			<div class="navbar-container">
				<img src="LOGO-removebg-preview.png" alt="SHOENIVERSE Logo" class="logo">
				<div class="nav-right-group">
					<ul class="nav-menu">
						<li><a href="index.html">Home</a></li>
						<li><a href="products.html" class="active">Products</a></li>
						<li><a href="about.html">About</a></li>
						<li><a href="contact.html">Contact Us</a></li>
					</ul>
					<div class="nav-right">
						<button class="cart-icon-btn" id="cartIconBtn">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
								<circle cx="9" cy="21" r="1"></circle>
								<circle cx="20" cy="21" r="1"></circle>
								<path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
							</svg>
							<span class="cart-badge" id="cartBadge">0</span>
						</button>
					</div>
				</div>
				<div class="hamburger">
					<span></span>
					<span></span>
					<span></span>
				</div>
			</div>
		</nav>

		<div class="products-container">
			<h1 class="page-title">Our Products</h1>
			
			<!-- Search and Filter Section -->
			<div class="filter-section">
				<div class="search-box">
					<input type="text" id="searchInput" placeholder="Search products..." class="search-input">
					<span class="search-icon">üîç</span>
				</div>
				
				<div class="filter-controls">
					<div class="sort-container">
						<label for="sortSelect">Sort by:</label>
						<select id="sortSelect" class="sort-select">
							<option value="default">Default</option>
							<option value="price-low">Price: Low to High</option>
							<option value="price-high">Price: High to Low</option>
							<option value="name-asc">Name: A to Z</option>
							<option value="name-desc">Name: Z to A</option>
						</select>
					</div>
					
					<div class="category-filters">
						<button class="filter-btn active" data-category="all">All</button>
						<button class="filter-btn" data-category="nike">Nike</button>
						<button class="filter-btn" data-category="dunks">Dunks</button>
						<button class="filter-btn" data-category="premium">Premium</button>
					</div>
				</div>
			</div>
			
			<div class="products-count">
				<span id="productCount">8</span> products found
			</div>
			
			<div class="products-grid" id="productsGrid">
				<div class="product-card" id="product-1" data-name="nike dunks 1" data-price="6000" data-category="nike dunks">
					<div class="product-image">
						<img src="1.jpg" alt="Nike Dunks 1">
						<div class="product-overlay">
							<button class="quick-view-btn" data-product="1">Quick View</button>
						</div>
					</div>
					<div class="product-info">
						<h3>NIKE DUNKS 1</h3>
						<p class="product-description">Premium quality sneakers</p>
						<p class="price">‚Ç±6,000</p>
						<div class="product-actions">
							<button class="button-5 add-to-cart-btn" role="button" data-product-id="1" data-product-name="NIKE DUNKS 1" data-product-price="6000" data-product-image="1.jpg">ADD TO CART</button>
						</div>
					</div>
				</div>

				<div class="product-card" id="product-2" data-name="nike dunks 2" data-price="6000" data-category="nike dunks">
					<div class="product-image">
						<img src="2.jpg" alt="Nike Dunks 2">
						<div class="product-overlay">
							<button class="quick-view-btn" data-product="2">Quick View</button>
						</div>
					</div>
					<div class="product-info">
						<h3>NIKE DUNKS 2</h3>
						<p class="product-description">Premium quality sneakers</p>
						<p class="price">‚Ç±6,000</p>
						<div class="product-actions">
							<button class="button-5 add-to-cart-btn" role="button" data-product-id="2" data-product-name="NIKE DUNKS 2" data-product-price="6000" data-product-image="2.jpg">ADD TO CART</button>
						</div>
					</div>
				</div>

				<div class="product-card" id="product-3" data-name="nike dunks 3" data-price="6000" data-category="nike dunks">
					<div class="product-image">
						<img src="3.jpg" alt="Nike Dunks 3">
						<div class="product-overlay">
							<button class="quick-view-btn" data-product="3">Quick View</button>
						</div>
					</div>
					<div class="product-info">
						<h3>NIKE DUNKS 3</h3>
						<p class="product-description">Premium quality sneakers</p>
						<p class="price">‚Ç±6,000</p>
						<div class="product-actions">
							<button class="button-5 add-to-cart-btn" role="button" data-product-id="3" data-product-name="NIKE DUNKS 3" data-product-price="6000" data-product-image="3.jpg">ADD TO CART</button>
						</div>
					</div>
				</div>

				<div class="product-card" id="product-4" data-name="nike dunks 4" data-price="6000" data-category="nike dunks">
					<div class="product-image">
						<img src="4.jpg" alt="Nike Dunks 4">
						<div class="product-overlay">
							<button class="quick-view-btn" data-product="4">Quick View</button>
						</div>
					</div>
					<div class="product-info">
						<h3>NIKE DUNKS 4</h3>
						<p class="product-description">Premium quality sneakers</p>
						<p class="price">‚Ç±6,000</p>
						<div class="product-actions">
							<button class="button-5 add-to-cart-btn" role="button" data-product-id="4" data-product-name="NIKE DUNKS 4" data-product-price="6000" data-product-image="4.jpg">ADD TO CART</button>
						</div>
					</div>
				</div>

				<div class="product-card" id="product-5" data-name="nike dunks 5" data-price="6000" data-category="nike dunks">
					<div class="product-image">
						<img src="5.jpg" alt="Nike Dunks 5">
						<div class="product-overlay">
							<button class="quick-view-btn" data-product="5">Quick View</button>
						</div>
					</div>
					<div class="product-info">
						<h3>NIKE DUNKS 5</h3>
						<p class="product-description">Premium quality sneakers</p>
						<p class="price">‚Ç±6,000</p>
						<div class="product-actions">
							<button class="button-5 add-to-cart-btn" role="button" data-product-id="5" data-product-name="NIKE DUNKS 5" data-product-price="6000" data-product-image="5.jpg">ADD TO CART</button>
						</div>
					</div>
				</div>

				<div class="product-card" id="product-6" data-name="nike dunks 6" data-price="6000" data-category="nike dunks">
					<div class="product-image">
						<img src="6.jpg" alt="Nike Dunks 6">
						<div class="product-overlay">
							<button class="quick-view-btn" data-product="6">Quick View</button>
						</div>
					</div>
					<div class="product-info">
						<h3>NIKE DUNKS 6</h3>
						<p class="product-description">Premium quality sneakers</p>
						<p class="price">‚Ç±6,000</p>
						<div class="product-actions">
							<button class="button-5 add-to-cart-btn" role="button" data-product-id="6" data-product-name="NIKE DUNKS 6" data-product-price="6000" data-product-image="6.jpg">ADD TO CART</button>
						</div>
					</div>
				</div>

				<div class="product-card" id="product-7" data-name="nike dunks 7" data-price="6000" data-category="nike dunks">
					<div class="product-image">
						<img src="7.jpg" alt="Nike Dunks 7">
						<div class="product-overlay">
							<button class="quick-view-btn" data-product="7">Quick View</button>
						</div>
					</div>
					<div class="product-info">
						<h3>NIKE DUNKS 7</h3>
						<p class="product-description">Premium quality sneakers</p>
						<p class="price">‚Ç±6,000</p>
						<div class="product-actions">
							<button class="button-5 add-to-cart-btn" role="button" data-product-id="7" data-product-name="NIKE DUNKS 7" data-product-price="6000" data-product-image="7.jpg">ADD TO CART</button>
						</div>
					</div>
				</div>

				<div class="product-card" id="product-8" data-name="nike dunks 8" data-price="6000" data-category="nike dunks">
					<div class="product-image">
						<img src="8.jpg" alt="Nike Dunks 8">
						<div class="product-overlay">
							<button class="quick-view-btn" data-product="8">Quick View</button>
						</div>
					</div>
					<div class="product-info">
						<h3>NIKE DUNKS 8</h3>
						<p class="product-description">Premium quality sneakers</p>
						<p class="price">‚Ç±6,000</p>
						<div class="product-actions">
							<button class="button-5 add-to-cart-btn" role="button" data-product-id="8" data-product-name="NIKE DUNKS 8" data-product-price="6000" data-product-image="8.jpg">ADD TO CART</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Cart Sidebar -->
	<div class="cart-sidebar" id="cartSidebar">
		<div class="cart-header">
			<h2>Shopping Cart</h2>
			<button class="cart-close" id="cartClose">&times;</button>
		</div>
		<div class="cart-items" id="cartItems">
			<div class="cart-empty" id="cartEmpty">
				<p>Your cart is empty</p>
				<button class="button-5" onclick="closeCart()">Continue Shopping</button>
			</div>
		</div>
		<div class="cart-summary" id="cartSummary">
			<div class="summary-row">
				<span>Subtotal:</span>
				<span id="subtotal">‚Ç±0</span>
			</div>
			<div class="summary-row">
				<span>Shipping:</span>
				<span id="shipping">‚Ç±0</span>
			</div>
			<div class="summary-row total">
				<span>Total:</span>
				<span id="total">‚Ç±0</span>
			</div>
			<button class="button-5 checkout-btn" id="checkoutBtn" onclick="checkout()">Proceed to Checkout</button>
		</div>
	</div>
	<div class="cart-overlay" id="cartOverlay"></div>

	<!-- Checkout Modal -->
	<div class="checkout-modal" id="checkoutModal">
		<div class="checkout-modal-content">
			<div class="checkout-header">
				<h2>Checkout</h2>
				<button class="checkout-close" id="checkoutClose">&times;</button>
			</div>
			<form id="checkoutForm" class="checkout-form">
				<div class="checkout-section">
					<h3>Shipping Information</h3>
					<div class="form-row">
						<div class="form-group">
							<label for="checkoutName">Full Name *</label>
							<input type="text" id="checkoutName" name="name" class="input-field" placeholder="Enter your full name" required>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group">
							<label for="checkoutEmail">Email Address *</label>
							<input type="email" id="checkoutEmail" name="email" class="input-field" placeholder="Enter your email" required>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group">
							<label for="checkoutAddress">Shipping Address *</label>
							<textarea id="checkoutAddress" name="address" class="input-field textarea-field" placeholder="Enter your complete address" rows="3" required></textarea>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group">
							<label for="checkoutPhone">Phone Number *</label>
							<input type="tel" id="checkoutPhone" name="phone" class="input-field" placeholder="Enter your phone number" required>
						</div>
					</div>
				</div>

				<div class="checkout-section">
					<h3>Payment Information</h3>
					<div class="form-row">
						<div class="form-group">
							<label for="paymentMethod">Payment Method *</label>
							<select id="paymentMethod" name="paymentMethod" class="input-field" required>
								<option value="">Select payment method</option>
								<option value="credit">Credit Card</option>
								<option value="debit">Debit Card</option>
							</select>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group">
							<label for="cardNumber">Card Number *</label>
							<input type="text" id="cardNumber" name="cardNumber" class="input-field" placeholder="1234 5678 9012 3456" maxlength="19" required>
						</div>
					</div>
					<div class="form-row form-row-2">
						<div class="form-group">
							<label for="cardExpiry">Expiry Date *</label>
							<input type="text" id="cardExpiry" name="cardExpiry" class="input-field" placeholder="MM/YY" maxlength="5" required>
						</div>
						<div class="form-group">
							<label for="cardCVV">CVV *</label>
							<input type="text" id="cardCVV" name="cardCVV" class="input-field" placeholder="123" maxlength="4" required>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group">
							<label for="cardName">Cardholder Name *</label>
							<input type="text" id="cardName" name="cardName" class="input-field" placeholder="Name on card" required>
						</div>
					</div>
				</div>

				<div class="checkout-section">
					<h3>Order Summary</h3>
					<div class="order-summary" id="checkoutOrderSummary">
						<!-- Order items will be populated here -->
					</div>
					<div class="summary-totals">
						<div class="summary-row">
							<span>Subtotal:</span>
							<span id="checkoutSubtotal">‚Ç±0</span>
						</div>
						<div class="summary-row">
							<span>Shipping:</span>
							<span id="checkoutShipping">‚Ç±0</span>
						</div>
						<div class="summary-row total">
							<span>Total:</span>
							<span id="checkoutTotal">‚Ç±0</span>
						</div>
					</div>
				</div>

				<div class="checkout-actions">
					<button type="button" class="button-5 checkout-cancel-btn" onclick="closeCheckout()">Cancel</button>
					<button type="submit" class="button-5 checkout-submit-btn">Place Order</button>
				</div>
			</form>
		</div>
	</div>
	<div class="checkout-overlay" id="checkoutOverlay"></div>

	<!-- Thank You Modal -->
	<div class="thank-you-modal" id="thankYouModal">
		<div class="thank-you-content">
			<div class="thank-you-icon">‚úì</div>
			<h2>Thank You for Your Purchase!</h2>
			<p class="thank-you-message">Thank you for buying in <strong>SHOENIVERSE</strong></p>
			<p class="thank-you-submessage">Your order has been placed successfully. We'll send you a confirmation email shortly.</p>
			<div class="thank-you-order-info" id="thankYouOrderInfo">
				<!-- Order details will be shown here -->
			</div>
			<button class="button-5 thank-you-btn" onclick="closeThankYou()">Continue Shopping</button>
		</div>
	</div>
	<div class="thank-you-overlay" id="thankYouOverlay"></div>

	<footer class="footer">
		<div class="footer-content">
			<p>&copy; 2024 SHOENIVERSE. All rights reserved.</p>
			<p>San Martin, Villanueva Misamis Oriental, 9002</p>
		</div>
	</footer>

	<script>
		// Mobile menu toggle
		const hamburger = document.querySelector('.hamburger');
		const navMenu = document.querySelector('.nav-menu');
		const navbar = document.querySelector('.navbar');
		
		if (hamburger) {
			hamburger.addEventListener('click', () => {
				navMenu.classList.toggle('active');
				hamburger.classList.toggle('active');
			});
		}

		// Close menu when clicking on a link
		document.querySelectorAll('.nav-menu a').forEach(link => {
			link.addEventListener('click', () => {
				navMenu.classList.remove('active');
				hamburger.classList.remove('active');
			});
		});

		// Navbar scroll effect
		window.addEventListener('scroll', () => {
			if (window.scrollY > 50) {
				navbar.classList.add('scrolled');
			} else {
				navbar.classList.remove('scrolled');
			}
		});

		// Product Search and Filter Functionality
		const searchInput = document.getElementById('searchInput');
		const sortSelect = document.getElementById('sortSelect');
		const filterBtns = document.querySelectorAll('.filter-btn');
		const productCards = document.querySelectorAll('.product-card');
		const productCount = document.getElementById('productCount');
		const productsGrid = document.getElementById('productsGrid');

		let currentCategory = 'all';
		let currentSort = 'default';

		// Search functionality
		searchInput.addEventListener('input', () => {
			filterProducts();
		});

		// Sort functionality
		sortSelect.addEventListener('change', (e) => {
			currentSort = e.target.value;
			filterProducts();
		});

		// Category filter functionality
		filterBtns.forEach(btn => {
			btn.addEventListener('click', () => {
				filterBtns.forEach(b => b.classList.remove('active'));
				btn.classList.add('active');
				currentCategory = btn.dataset.category;
				filterProducts();
			});
		});

		// Filter and sort products
		function filterProducts() {
			const searchTerm = searchInput.value.toLowerCase();
			let visibleProducts = [];

			productCards.forEach(card => {
				const name = card.dataset.name.toLowerCase();
				const category = card.dataset.category.toLowerCase();
				const matchesSearch = name.includes(searchTerm);
				const matchesCategory = currentCategory === 'all' || 
					(currentCategory === 'nike' && category.includes('nike')) ||
					(currentCategory === 'dunks' && category.includes('dunks')) ||
					(currentCategory === 'premium' && category.includes('premium'));

				if (matchesSearch && matchesCategory) {
					card.style.display = 'flex';
					visibleProducts.push(card);
				} else {
					card.style.display = 'none';
				}
			});

			// Sort products
			if (currentSort !== 'default') {
				visibleProducts.sort((a, b) => {
					if (currentSort === 'price-low') {
						return parseFloat(a.dataset.price) - parseFloat(b.dataset.price);
					} else if (currentSort === 'price-high') {
						return parseFloat(b.dataset.price) - parseFloat(a.dataset.price);
					} else if (currentSort === 'name-asc') {
						return a.dataset.name.localeCompare(b.dataset.name);
					} else if (currentSort === 'name-desc') {
						return b.dataset.name.localeCompare(a.dataset.name);
					}
				});

				// Reorder in DOM
				visibleProducts.forEach(card => {
					productsGrid.appendChild(card);
				});
			}

			// Update product count
			productCount.textContent = visibleProducts.length;
		}

		// Cart Management
		let cart = JSON.parse(localStorage.getItem('cart')) || [];
		let currentModalProduct = null;

		// Normalize cart data (ensure IDs and sizes are strings)
		cart = cart.map(item => ({
			...item,
			id: String(item.id),
			size: String(item.size)
		}));

		// Initialize cart display
		updateCartBadge();
		renderCart();

		// Cart sidebar toggle
		const cartIconBtn = document.getElementById('cartIconBtn');
		const cartSidebar = document.getElementById('cartSidebar');
		const cartClose = document.getElementById('cartClose');
		const cartOverlay = document.getElementById('cartOverlay');

		cartIconBtn.addEventListener('click', openCart);
		cartClose.addEventListener('click', closeCart);
		cartOverlay.addEventListener('click', closeCart);

		function openCart() {
			cartSidebar.classList.add('active');
			cartOverlay.classList.add('active');
			document.body.style.overflow = 'hidden';
		}

		function closeCart() {
			cartSidebar.classList.remove('active');
			cartOverlay.classList.remove('active');
			document.body.style.overflow = '';
		}

		// Add to cart functionality
		const addToCartBtns = document.querySelectorAll('.add-to-cart-btn');
		addToCartBtns.forEach(btn => {
			btn.addEventListener('click', () => {
				const productId = btn.dataset.productId;
				const productName = btn.dataset.productName;
				const productPrice = parseInt(btn.dataset.productPrice);
				const productImage = btn.dataset.productImage;
				showSizeSelectionModal(productId, productName, productPrice, productImage);
			});
		});

		function showSizeSelectionModal(id, name, price, image) {
			// Create size selection modal
			const modal = document.createElement('div');
			modal.className = 'size-selection-modal';
			modal.innerHTML = `
				<div class="size-modal-content">
					<span class="size-modal-close">&times;</span>
					<div class="size-modal-body">
						<div class="size-modal-image">
							<img src="${image}" alt="${name}">
						</div>
						<div class="size-modal-info">
							<h3>${name}</h3>
							<p class="size-modal-price">‚Ç±${price.toLocaleString()}</p>
							<div class="size-selector-modal">
								<label>Select Size:</label>
								<div class="size-options">
									<button class="size-option" data-size="7">7</button>
									<button class="size-option" data-size="8">8</button>
									<button class="size-option active" data-size="9">9</button>
									<button class="size-option" data-size="10">10</button>
									<button class="size-option" data-size="11">11</button>
									<button class="size-option" data-size="12">12</button>
								</div>
							</div>
							<div class="quantity-selector-modal">
								<label>Quantity:</label>
								<div class="quantity-controls-modal">
									<button class="qty-btn-modal qty-decrease-modal" type="button">‚àí</button>
									<span class="qty-value-modal">1</span>
									<button class="qty-btn-modal qty-increase-modal" type="button">+</button>
								</div>
							</div>
							<button class="button-5 size-add-to-cart-btn" type="button">ADD TO CART</button>
						</div>
					</div>
				</div>
			`;
			document.body.appendChild(modal);
			modal.style.display = 'flex';

			let selectedSize = '9';
			let selectedQuantity = 1;

			// Size selection
			const sizeOptions = modal.querySelectorAll('.size-option');
			sizeOptions.forEach(option => {
				option.addEventListener('click', () => {
					sizeOptions.forEach(opt => opt.classList.remove('active'));
					option.classList.add('active');
					selectedSize = option.dataset.size;
				});
			});

			// Quantity controls
			const qtyValue = modal.querySelector('.qty-value-modal');
			const qtyDecrease = modal.querySelector('.qty-decrease-modal');
			const qtyIncrease = modal.querySelector('.qty-increase-modal');

			qtyDecrease.addEventListener('click', () => {
				if (selectedQuantity > 1) {
					selectedQuantity--;
					qtyValue.textContent = selectedQuantity;
				}
			});

			qtyIncrease.addEventListener('click', () => {
				if (selectedQuantity < 10) {
					selectedQuantity++;
					qtyValue.textContent = selectedQuantity;
				}
			});

			// Add to cart button
			const addBtn = modal.querySelector('.size-add-to-cart-btn');
			addBtn.addEventListener('click', () => {
				addToCart(id, name, price, image, selectedSize, selectedQuantity);
				modal.remove();
			});

			// Close modal
			const closeBtn = modal.querySelector('.size-modal-close');
			closeBtn.addEventListener('click', () => {
				modal.remove();
			});

			modal.addEventListener('click', (e) => {
				if (e.target === modal) {
					modal.remove();
				}
			});
		}

		function addToCart(id, name, price, image, size = '9', quantity = 1) {
			// Convert to strings for consistent comparison
			const idStr = String(id);
			const sizeStr = String(size);
			const quantityNum = parseInt(quantity) || 1;
			const existingItem = cart.find(item => String(item.id) === idStr && String(item.size) === sizeStr);
			
			if (existingItem) {
				existingItem.quantity += quantityNum;
			} else {
				cart.push({
					id: idStr,
					name: name,
					price: price,
					image: image,
					size: sizeStr,
					quantity: quantityNum
				});
			}
			
			saveCart();
			updateCartBadge();
			renderCart();
			
			// Show notification
			const message = quantityNum > 1 
				? `${quantityNum} items added to cart!` 
				: 'Item added to cart!';
			showNotification(message);
		}

		function removeFromCart(id, size) {
			// Convert id to string for comparison (in case it's stored as number)
			const idStr = String(id);
			const sizeStr = String(size);
			cart = cart.filter(item => !(String(item.id) === idStr && String(item.size) === sizeStr));
			saveCart();
			updateCartBadge();
			renderCart();
		}

		function updateQuantity(id, size, change) {
			// Convert id to string for comparison (in case it's stored as number)
			const idStr = String(id);
			const sizeStr = String(size);
			const item = cart.find(item => String(item.id) === idStr && String(item.size) === sizeStr);
			if (item) {
				item.quantity += change;
				if (item.quantity <= 0) {
					removeFromCart(id, size);
					return;
				}
				saveCart();
				renderCart();
			}
		}

		function saveCart() {
			localStorage.setItem('cart', JSON.stringify(cart));
		}

		function updateCartBadge() {
			const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
			document.getElementById('cartBadge').textContent = totalItems;
			document.getElementById('cartBadge').style.display = totalItems > 0 ? 'flex' : 'none';
		}

		function renderCart() {
			const cartItems = document.getElementById('cartItems');
			const cartEmpty = document.getElementById('cartEmpty');
			const cartSummary = document.getElementById('cartSummary');
			
			// Remove all existing cart-item elements
			const existingItems = cartItems.querySelectorAll('.cart-item');
			existingItems.forEach(item => item.remove());
			
			if (cart.length === 0) {
				if (cartEmpty) {
					cartEmpty.style.display = 'flex';
				} else {
					// Recreate cart-empty if it was removed
					const emptyDiv = document.createElement('div');
					emptyDiv.className = 'cart-empty';
					emptyDiv.id = 'cartEmpty';
					emptyDiv.innerHTML = `
						<p>Your cart is empty</p>
						<button class="button-5" onclick="closeCart()">Continue Shopping</button>
					`;
					cartItems.appendChild(emptyDiv);
				}
				if (cartSummary) {
					cartSummary.style.display = 'none';
				}
				return;
			}
			
			if (cartEmpty) {
				cartEmpty.style.display = 'none';
			}
			if (cartSummary) {
				cartSummary.style.display = 'block';
			}
			
			// Create cart items with individual event listeners
			cart.forEach((item, index) => {
				const cartItemDiv = document.createElement('div');
				cartItemDiv.className = 'cart-item';
				cartItemDiv.setAttribute('data-item-index', index);
				
				cartItemDiv.innerHTML = `
					<div class="cart-item-image">
						<img src="${item.image}" alt="${item.name}">
					</div>
					<div class="cart-item-details">
						<h4>${item.name}</h4>
						<p>Size: ${item.size}</p>
						<p class="cart-item-price">‚Ç±${item.price.toLocaleString()}</p>
					</div>
					<div class="cart-item-controls">
						<div class="quantity-controls">
							<button class="qty-btn qty-decrease" type="button">‚àí</button>
							<span class="qty-value">${item.quantity}</span>
							<button class="qty-btn qty-increase" type="button">+</button>
						</div>
						<button class="remove-btn" type="button">Remove</button>
					</div>
					<div class="cart-item-total">
						‚Ç±${(item.price * item.quantity).toLocaleString()}
					</div>
				`;
				
				// Attach event listeners directly to buttons
				const removeBtn = cartItemDiv.querySelector('.remove-btn');
				const qtyDecrease = cartItemDiv.querySelector('.qty-decrease');
				const qtyIncrease = cartItemDiv.querySelector('.qty-increase');
				
				removeBtn.addEventListener('click', () => {
					removeFromCart(item.id, item.size);
				});
				
				qtyDecrease.addEventListener('click', () => {
					updateQuantity(item.id, item.size, -1);
				});
				
				qtyIncrease.addEventListener('click', () => {
					updateQuantity(item.id, item.size, 1);
				});
				
				cartItems.appendChild(cartItemDiv);
			});
			
			updateOrderSummary();
		}

		function updateOrderSummary() {
			const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
			const shipping = subtotal >= 5000 ? 0 : 200;
			const total = subtotal + shipping;
			
			document.getElementById('subtotal').textContent = `‚Ç±${subtotal.toLocaleString()}`;
			document.getElementById('shipping').textContent = shipping === 0 ? 'Free' : `‚Ç±${shipping.toLocaleString()}`;
			document.getElementById('total').textContent = `‚Ç±${total.toLocaleString()}`;
		}

		function checkout() {
			if (cart.length === 0) {
				alert('Your cart is empty!');
				return;
			}
			openCheckout();
		}

		function openCheckout() {
			const checkoutModal = document.getElementById('checkoutModal');
			const checkoutOverlay = document.getElementById('checkoutOverlay');
			const checkoutOrderSummary = document.getElementById('checkoutOrderSummary');
			
			// Populate order summary
			checkoutOrderSummary.innerHTML = '';
			cart.forEach(item => {
				const orderItem = document.createElement('div');
				orderItem.className = 'order-item';
				orderItem.innerHTML = `
					<div class="order-item-info">
						<img src="${item.image}" alt="${item.name}">
						<div>
							<h4>${item.name}</h4>
							<p>Size: ${item.size} | Qty: ${item.quantity}</p>
						</div>
					</div>
					<div class="order-item-price">‚Ç±${(item.price * item.quantity).toLocaleString()}</div>
				`;
				checkoutOrderSummary.appendChild(orderItem);
			});
			
			// Update totals
			const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
			const shipping = subtotal >= 5000 ? 0 : 200;
			const total = subtotal + shipping;
			
			document.getElementById('checkoutSubtotal').textContent = `‚Ç±${subtotal.toLocaleString()}`;
			document.getElementById('checkoutShipping').textContent = shipping === 0 ? 'Free' : `‚Ç±${shipping.toLocaleString()}`;
			document.getElementById('checkoutTotal').textContent = `‚Ç±${total.toLocaleString()}`;
			
			checkoutModal.style.display = 'flex';
			checkoutOverlay.style.display = 'block';
			checkoutOverlay.classList.add('active');
			document.body.style.overflow = 'hidden';
		}

		function closeCheckout() {
			const checkoutModal = document.getElementById('checkoutModal');
			const checkoutOverlay = document.getElementById('checkoutOverlay');
			checkoutModal.style.display = 'none';
			checkoutOverlay.style.display = 'none';
			checkoutOverlay.classList.remove('active');
			document.body.style.overflow = '';
		}

		function showNotification(message) {
			const notification = document.createElement('div');
			notification.className = 'notification';
			notification.textContent = message;
			document.body.appendChild(notification);
			setTimeout(() => {
				notification.classList.add('show');
			}, 10);
			setTimeout(() => {
				notification.classList.remove('show');
				setTimeout(() => notification.remove(), 300);
			}, 2000);
		}

		// Make functions globally accessible
		window.closeCart = closeCart;
		window.checkout = checkout;
		window.closeCheckout = closeCheckout;

		// Checkout modal close handlers
		const checkoutClose = document.getElementById('checkoutClose');
		const checkoutOverlay = document.getElementById('checkoutOverlay');
		if (checkoutClose) {
			checkoutClose.addEventListener('click', closeCheckout);
		}
		if (checkoutOverlay) {
			checkoutOverlay.addEventListener('click', closeCheckout);
		}

		// Card number formatting
		const cardNumberInput = document.getElementById('cardNumber');
		if (cardNumberInput) {
			cardNumberInput.addEventListener('input', (e) => {
				let value = e.target.value.replace(/\s/g, '');
				let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
				e.target.value = formattedValue;
			});
		}

		// Expiry date formatting
		const cardExpiryInput = document.getElementById('cardExpiry');
		if (cardExpiryInput) {
			cardExpiryInput.addEventListener('input', (e) => {
				let value = e.target.value.replace(/\D/g, '');
				if (value.length >= 2) {
					value = value.substring(0, 2) + '/' + value.substring(2, 4);
				}
				e.target.value = value;
			});
		}

		// CVV formatting (numbers only)
		const cardCVVInput = document.getElementById('cardCVV');
		if (cardCVVInput) {
			cardCVVInput.addEventListener('input', (e) => {
				e.target.value = e.target.value.replace(/\D/g, '');
			});
		}

		// Form submission
		const checkoutForm = document.getElementById('checkoutForm');
		if (checkoutForm) {
			checkoutForm.addEventListener('submit', (e) => {
				e.preventDefault();
				
				// Get form data
				const formData = {
					name: document.getElementById('checkoutName').value,
					email: document.getElementById('checkoutEmail').value,
					address: document.getElementById('checkoutAddress').value,
					phone: document.getElementById('checkoutPhone').value,
					paymentMethod: document.getElementById('paymentMethod').value,
					cardNumber: document.getElementById('cardNumber').value,
					cardExpiry: document.getElementById('cardExpiry').value,
					cardCVV: document.getElementById('cardCVV').value,
					cardName: document.getElementById('cardName').value,
					order: cart,
					total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0) + (cart.reduce((sum, item) => sum + (item.price * item.quantity), 0) >= 5000 ? 0 : 200)
				};
				
				// Show thank you modal
				showThankYou(formData);
				
				// Clear cart
				cart = [];
				saveCart();
				updateCartBadge();
				renderCart();
				
				// Close checkout modal
				closeCheckout();
				
				// Close cart sidebar
				closeCart();
				
				// Reset form
				checkoutForm.reset();
			});
		}

		function showThankYou(formData) {
			const thankYouModal = document.getElementById('thankYouModal');
			const thankYouOverlay = document.getElementById('thankYouOverlay');
			const thankYouOrderInfo = document.getElementById('thankYouOrderInfo');
			
			// Generate order number
			const orderNumber = 'SHOE-' + Date.now().toString().slice(-8);
			
			// Calculate totals
			const subtotal = formData.order.reduce((sum, item) => sum + (item.price * item.quantity), 0);
			const shipping = subtotal >= 5000 ? 0 : 200;
			const total = subtotal + shipping;
			
			// Display order info
			thankYouOrderInfo.innerHTML = `
				<div class="order-number">
					<p><strong>Order Number:</strong> ${orderNumber}</p>
				</div>
				<div class="order-summary-thankyou">
					<p><strong>Items Ordered:</strong> ${formData.order.length}</p>
					<p><strong>Total Amount:</strong> ‚Ç±${total.toLocaleString()}</p>
					<p><strong>Shipping to:</strong> ${formData.address}</p>
				</div>
			`;
			
			thankYouModal.style.display = 'flex';
			thankYouOverlay.style.display = 'block';
			thankYouOverlay.classList.add('active');
			document.body.style.overflow = 'hidden';
		}

		function closeThankYou() {
			const thankYouModal = document.getElementById('thankYouModal');
			const thankYouOverlay = document.getElementById('thankYouOverlay');
			thankYouModal.style.display = 'none';
			thankYouOverlay.style.display = 'none';
			thankYouOverlay.classList.remove('active');
			document.body.style.overflow = '';
		}

		// Make function globally accessible
		window.closeThankYou = closeThankYou;

		// Product Details Modal
		const quickViewBtns = document.querySelectorAll('.quick-view-btn');
		
		quickViewBtns.forEach(btn => {
			btn.addEventListener('click', (e) => {
				const productNum = btn.dataset.product;
				showProductModal(productNum);
			});
		});

		function showProductModal(productNum) {
			// Try to find by ID first (for hash navigation)
			let card = document.querySelector(`#product-${productNum}`);
			
			// If not found by ID, try to find by data-product attribute
			if (!card) {
				card = document.querySelector(`.product-card [data-product="${productNum}"]`)?.closest('.product-card');
			}
			
			if (!card) return;
			
			const productName = card.querySelector('h3').textContent;
			const productPrice = card.querySelector('.price').textContent;
			const productImg = card.querySelector('img').src;
			const productDesc = card.querySelector('.product-description')?.textContent || 'Premium quality sneakers';
			const addToCartBtn = card.querySelector('.add-to-cart-btn');
			const productId = addToCartBtn?.dataset.productId || productNum;
			const productPriceNum = parseInt(card.dataset.price);
			const productImage = addToCartBtn?.dataset.productImage || card.querySelector('img').src.split('/').pop();

			currentModalProduct = {
				id: productId,
				name: productName,
				price: productPriceNum,
				image: productImage
			};

			// Create modal
			const modal = document.createElement('div');
			modal.className = 'product-modal';
			modal.innerHTML = `
				<div class="modal-content">
					<span class="modal-close">&times;</span>
					<div class="modal-body">
						<div class="modal-image">
							<img src="${productImg}" alt="${productName}">
						</div>
						<div class="modal-info">
							<h2>${productName}</h2>
							<p class="modal-description">${productDesc}</p>
							<p class="modal-price">${productPrice}</p>
							<div class="size-selector">
								<label>Size:</label>
								<select class="size-select" id="modalSizeSelect">
									<option value="7">7</option>
									<option value="8">8</option>
									<option value="9" selected>9</option>
									<option value="10">10</option>
									<option value="11">11</option>
									<option value="12">12</option>
								</select>
							</div>
							<button class="button-5 modal-buy-btn" id="modalAddToCart">ADD TO CART</button>
							<p class="modal-shipping">Free shipping on orders over ‚Ç±5,000</p>
						</div>
					</div>
				</div>
			`;
			document.body.appendChild(modal);
			modal.style.display = 'flex';

			// Add to cart from modal
			modal.querySelector('#modalAddToCart').addEventListener('click', () => {
				const size = modal.querySelector('#modalSizeSelect').value;
				if (currentModalProduct) {
					addToCart(currentModalProduct.id, currentModalProduct.name, currentModalProduct.price, currentModalProduct.image, size);
					modal.remove();
				}
			});

			// Close modal
			modal.querySelector('.modal-close').addEventListener('click', () => {
				modal.remove();
				// Remove hash from URL when closing
				if (window.location.hash) {
					history.replaceState(null, null, window.location.pathname);
				}
			});

			modal.addEventListener('click', (e) => {
				if (e.target === modal) {
					modal.remove();
					// Remove hash from URL when closing
					if (window.location.hash) {
						history.replaceState(null, null, window.location.pathname);
					}
				}
			});
		}

		// Auto-open product modal when page loads with hash (from Quick View)
		function openProductModalFromHash() {
			const hash = window.location.hash;
			if (hash) {
				// Extract product number from hash (e.g., #product-1 -> 1)
				const match = hash.match(/product-(\d+)/);
				if (match) {
					const productNum = match[1];
					// Wait a bit for page to fully load
					setTimeout(() => {
						showProductModal(productNum);
						// Scroll to the product card as well
						const productElement = document.querySelector(hash);
						if (productElement) {
							setTimeout(() => {
								productElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
							}, 100);
						}
					}, 300);
				}
			}
		}

		// Run on page load
		window.addEventListener('load', openProductModalFromHash);

		// Also handle hash changes (in case user navigates with back/forward)
		window.addEventListener('hashchange', openProductModalFromHash);
	</script>
</body>
</html>